<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>game timer</title>
<script src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<link rel="stylesheet" href="counter.css" type="text/css" media="all">
</head>
<body>
    
<div id="container"></div> <!--  required to start page-->
  <div id="SimpleCounter"></div>
 
  <script type="text/babel">
    class SimpleCounter extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          count: 5 //start count 120
        };
        this.timerTick = this.timerTick.bind(this);
        console.log("Constructor!");
      }
      timerTick() {
        this.setState((prevState) => {
          return { 
            count: prevState.count - 1 
          };
        });
      }
      componentDidMount() {
        this.timer = setInterval(this.timerTick, 1000);
        console.log("Component has mounted!");
      }
      componentDidUpdate(prevProps, prevState) {
          console.log("THIS.TIMER: ",this.timer);
        console.log("Component updated from: " + prevState.count);
        if (this.state.count == 0) {
            clearInterval(this.timer);
        }
      }
        
      componentWillUnmount() {
        console.log("Component is about to be unmounted!");
        clearInterval(this.timer);
      }
      render() {
        console.log("SimpleCounter render call!");
        
        return (
          
           <h1> {this.state.count == 0 ?  "Game Over!" : this.state.count} </h1>
        );
      }
    }
    ReactDOM.render(
      <div>
        <SimpleCounter />
      </div>,
      document.querySelector("#container")
    );
  </script>
</body>
</html>